<!-- views/welcome.ejs -->

<div class="wel-signup-options">
  <p>
    Don't have an account?
    <span class="wel-getstarted-box">
      <a
        href="/signup<%= typeof ref !== 'undefined' && ref ? `?ref=${encodeURIComponent(ref)}` : '' %><%= creator ? `${typeof ref !== 'undefined' && ref ? '&' : '?'}creator=${encodeURIComponent(creator)}` : '' %>"
        class="wel-signup-link"
      >
        Get Started
      </a>
    </span>
  </p>
</div>

<header class="wel-logo-header">
  <a href="/home" class="wel-logo-link">
    <img
      src="https://storage.googleapis.com/my-public-profile-pictures/logos/elitefans-logo.PNG"
      alt="EliteFans Logo"
      class="wel-site-logo"
    >
    <span class="wel-logo-text">EliteFans</span>
  </a>
</header>

<div class="wel-content-section">
  <div class="wel-welcome-container">
    <% if (typeof creator !== 'undefined' && creator) { %>
      <h2 class="wel-heading">Welcome Back</h2>
      <p class="wel-subheading">Sign up or log in to subscribe to <%= creator %></p>
    <% } else { %>
      <h2 class="wel-heading">Welcome Back</h2>
      <p class="wel-subheading">Sign up to meet and support your favorite creators</p>
    <% } %>

    <% if (errorMessage && errorMessage.length > 0) { %>
      <div class="wel-error-message">
        <%= errorMessage %>
      </div>
    <% } %>

    <form
      action="/login<%= creator ? `?creator=${encodeURIComponent(creator)}` : '' %>"
      method="POST"
      class="wel-login-form"
    >
      <% if (creator) { %>
        <input type="hidden" name="creator" value="<%= creator %>">
      <% } %>
      <% if (typeof ref !== 'undefined' && ref) { %>
        <input type="hidden" name="ref" value="<%= ref %>">
      <% } %>

      <input
        type="text"
        name="usernameOrEmail"
        placeholder="Email Address or Username"
        
        required
        class="wel-input"
      >

      <div class="wel-password-container">
        <input
          type="password"
          name="password"
          placeholder="Password"
          required
          class="wel-input"
        >
        <span class="wel-toggle-password">üëÅÔ∏è</span>
      </div>

      <button type="submit" class="wel-button-login">Sign In</button>
    </form>

    <div class="wel-forgot-password">
      <a href="/forgot-password" class="wel-forgot-link">Forgot your password?</a>
    </div>

    <div class="wel-sign-options">
      <p class="wel-sign-text">Or sign in with</p>
      <div class="wel-social-buttons">
        <a
          href="/google<%= creator ? `?creator=${encodeURIComponent(creator)}` : '' %><%= typeof ref !== 'undefined' && ref ? `${creator ? '&' : '?'}ref=${encodeURIComponent(ref)}` : '' %>"
          class="wel-a-sign"
        >
          <i class="fa-brands fa-google wel-social-icon"></i> Google
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const togglePassword = document.querySelector('.wel-toggle-password');
    const passwordInput = document.querySelector('input[name="password"]');

    togglePassword.addEventListener('click', function() {
      const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordInput.setAttribute('type', type);
      this.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
    });
  });
</script>
